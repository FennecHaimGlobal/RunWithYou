@using Microsoft.AspNet.Identity

@if (Request.IsAuthenticated)
{
    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="usernameHeaderField"><i class="fa fa-user"></i> @string.Concat(User.Identity.GetUserName().Select(x => Char.IsUpper(x) ? " " + x : x.ToString())).TrimStart(' ')<b class="caret"></b></a>
    <ul class="dropdown-menu">
        <li>
            <a href="/Manage/Index"><i class="fa fa-fw fa-user"></i> Profile</a>
        </li>
        <li>
            <a href="#"><i class="fa fa-fw fa-envelope-o"></i> Send email</a>
        </li>
        <li>
            <a href="#"><i class="fa fa-fw fa-gear"></i> Settings</a>
        </li>
        <li class="divider"></li>
        <li>
            @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
            {
                @Html.AntiForgeryToken()
                <a href="javascript:document.getElementById('logoutForm').submit()"><i class="fa fa-fw fa-power-off"></i> Log off</a>
            }
        </li>
    </ul>
}
else
{
    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="usernameHeaderField"><i class="fa fa-user"></i> <b class="caret"></b></a>
    <ul class="dropdown-menu">
        <li><a id="registerLink" href="/Account/Register"><i class="fa fa-fw fa-user"></i> Register</a></li>
        <li><a id="loginLink" href="/Account/Login"><i class="fa fa-fw fa-user"></i> Log in</a></li>
    </ul>
}